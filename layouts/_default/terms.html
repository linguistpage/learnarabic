{{- define "main" }}



{{ partial "breadcrumbs.html" . }}

<div class="search js-only">
  <input type="text" id="search" placeholder="🔎 Search/Recherche/Buscar/تلاش کریں۔/Suchen/Поиск">
</div>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    for (e of document.getElementsByClassName("js-only")) {
      e.classList.remove("js-only");
    }
    const posts = document.querySelectorAll("#artlist li");
    const search = document.getElementById("search");
    const oldheading = document.getElementById("myarticles");
    const clearSearch = document.getElementById("clear-search");
    const artlist = document.getElementById("artlist");
    search.addEventListener("input", () => {
      // grab search input value
      const searchText = search.value.toLowerCase().trim().normalize('NFD').replace(/\p{Diacritic}/gu, "");
      const searchTerms = searchText.split(" ");
      const hasFilter = searchText.length > 0;
      artlist.classList.toggle("list-searched", hasFilter);
      oldheading.classList.toggle("hidden", hasFilter);
      // for each recipe hide all but matched
      posts.forEach(recipe => {
        const searchString = `${recipe.textContent} ${recipe.dataset.tags}`.toLowerCase().normalize('NFD').replace(/\p{Diacritic}/gu, "");
        const isMatch = searchTerms.every(term => searchString.includes(term));
        recipe.hidden = !isMatch;
        recipe.classList.toggle("matched-recipe", hasFilter && isMatch);
      })
    })
    clearSearch.addEventListener("click", () => {
      search.value = "";
    })
    posts.forEach(recipe => {
      recipe.hidden = false;
      recipe.classList.remove("matched-recipe");
    })
    artlist.classList.remove("list-searched");
    oldheading.classList.remove("hidden");
  })
  // @license-end
</script>


<div id=artlist>
  {{- $type := .Type }}
  {{- range $key, $value := .Data.Terms.Alphabetical }}
  {{- $name := .Name }}
  {{- $count := .Count }}
  {{- with site.GetPage (printf "/%s/%s" $type $name) }}
  <div id="myarticles" class="older-article">
    <div class="mainlist">
      <a class="mainlink" href="{{.Permalink}}">
 <p style="margin: 5px; vertical-align: middle; display: inline-block;"> <a href="{{ .Permalink }}">{{ .Params.title }} </a></p>
      </a>
      <small style="margin-left: 3px;text-decoration: none; " class="mainlink" id="mini"> ({{ $count }})</small>

    </div>
  </div>
  {{- end }}
  {{- end }}
</div>
{{- end }}{{/* end main */ -}}
